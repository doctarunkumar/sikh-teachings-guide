<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sikh Teachings Guide - ‡®∏‡®ø‡©±‡®ñ ‡®∏‡®ø‡©±‡®ñ‡®ø‡®Ü</title>
    <meta name="description" content="Learn Sikh teachings from Guru Granth Sahib Ji. Ask questions about Sikhi philosophy, daily practices, and life guidance.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .gurmukhi-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .chat-container {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            text-align: right;
        }

        .user-message .bubble {
            background: #667eea;
            color: white;
            display: inline-block;
            padding: 12px 18px;
            border-radius: 18px 18px 5px 18px;
            max-width: 70%;
            text-align: left;
        }

        .bot-message .bubble {
            background: white;
            border: 2px solid #e9ecef;
            display: inline-block;
            padding: 15px 20px;
            border-radius: 5px 18px 18px 18px;
            max-width: 85%;
        }

        .gurmukhi {
            font-size: 24px;
            line-height: 1.8;
            color: #1a1a1a;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .translation {
            font-size: 16px;
            color: #495057;
            font-style: italic;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .citation {
            font-size: 12px;
            color: #6c757d;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e9ecef;
        }

        .explanation {
            font-size: 15px;
            color: #212529;
            line-height: 1.7;
            margin-top: 12px;
        }

        .input-container {
            padding: 20px;
            background: white;
            border-top: 2px solid #e9ecef;
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
        }

        #userInput {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 15px;
            outline: none;
            transition: border-color 0.3s;
        }

        #userInput:focus {
            border-color: #667eea;
        }

        #sendBtn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        #sendBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        #sendBtn:active {
            transform: translateY(0);
        }

        #sendBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: inline-block;
            padding: 15px 20px;
        }

        .loading-dots {
            display: inline-flex;
            gap: 5px;
        }

        .loading-dots span {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .welcome-message h2 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .welcome-message p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .suggestion-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .suggestion-btn:hover {
            background: #667eea;
            color: white;
        }

        .footer {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-top: 2px solid #e9ecef;
            font-size: 12px;
            color: #6c757d;
        }

        @media (max-width: 600px) {
            .container {
                border-radius: 0;
            }
            
            .chat-container {
                height: 400px;
            }

            .gurmukhi {
                font-size: 20px;
            }

            .gurmukhi-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="gurmukhi-title">‡®µ‡®æ‡®π‡®ø‡®ó‡©Å‡®∞‡©Ç ‡®ú‡©Ä ‡®ï‡®æ ‡®ñ‡®æ‡®≤‡®∏‡®æ, ‡®µ‡®æ‡®π‡®ø‡®ó‡©Å‡®∞‡©Ç ‡®ú‡©Ä ‡®ï‡©Ä ‡®´‡®§‡®π‡®ø</div>
            <h1>Sikh Teachings Guide</h1>
            <p class="subtitle">Ask questions about Sikhi ‚Ä¢ Learn from Guru Granth Sahib Ji</p>
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="welcome-message">
                <h2>Welcome! ‡®∏‡®§‡®ø ‡®∏‡©ç‡®∞‡©Ä ‡®Ö‡®ï‡®æ‡®≤</h2>
                <p>I'm here to help you learn about Sikh teachings from Guru Granth Sahib Ji.</p>
                <p>Ask me questions about Sikhi philosophy, daily practices, or life guidance.</p>
                
                <div class="suggestions">
                    <button class="suggestion-btn" onclick="askQuestion('What is the meaning of life according to Sikhi?')">Meaning of Life</button>
                    <button class="suggestion-btn" onclick="askQuestion('How should I deal with difficult times?')">Dealing with Hardship</button>
                    <button class="suggestion-btn" onclick="askQuestion('What does Guru ji say about helping others?')">Helping Others</button>
                    <button class="suggestion-btn" onclick="askQuestion('How can I control my anger?')">Controlling Anger</button>
                </div>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="userInput" 
                    placeholder="Ask a question about Sikh teachings..."
                    onkeypress="if(event.key === 'Enter') sendMessage()"
                />
                <button id="sendBtn" onclick="sendMessage()">Send</button>
            </div>
        </div>

        <div class="footer">
            <p>This tool uses AI to share Sikh teachings. Always consult with learned Sikhs and Guru Granth Sahib Ji for authoritative guidance.</p>
            <p style="margin-top: 5px;">Made with üôè for the Sangat</p>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');

        function askQuestion(question) {
            userInput.value = question;
            sendMessage();
        }

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'message user-message' : 'message bot-message';
            messageDiv.innerHTML = `<div class="bubble">${content}</div>`;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function addLoadingIndicator() {
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message bot-message';
            loadingDiv.id = 'loading';
            loadingDiv.innerHTML = `
                <div class="bubble loading">
                    <div class="loading-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeLoadingIndicator() {
            const loading = document.getElementById('loading');
            if (loading) loading.remove();
        }

        async function sendMessage() {
            const question = userInput.value.trim();
            if (!question) return;

            // Clear welcome message if present
            const welcome = document.querySelector('.welcome-message');
            if (welcome) welcome.remove();

            // Add user message
            addMessage(question, true);
            userInput.value = '';
            sendBtn.disabled = true;

            // Add loading indicator
            addLoadingIndicator();

            try {
                // Call Claude API
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 2000,
                        messages: [{
                            role: 'user',
                            content: `You are a wise and humble teacher of Sikh philosophy based on Guru Granth Sahib Ji. 

Your role is to:
1. Answer questions according to Sikh teachings
2. Quote relevant verses from Guru Granth Sahib Ji when appropriate
3. Explain the meaning in simple, compassionate language
4. Always show respect for the sacred scripture
5. For controversial topics, state verified facts and what the Gurus taught
6. If you don't know something with certainty, acknowledge this humbly

When quoting Gurbani:
- Show the Gurmukhi text in proper script (if relevant)
- Provide English translation
- Give the citation (Ang number, Guru name)
- Explain the meaning briefly

Keep responses concise and warm - like a family elder teaching with love.

User's question: ${question}

Please respond in a warm, teacher-like manner. Format your response with proper structure:
- If quoting Gurbani, use clear sections
- Keep explanations brief but meaningful
- Use simple language suitable for all ages`
                        }]
                    })
                });

                removeLoadingIndicator();

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const data = await response.json();
                const answer = data.content[0].text;

                // Format the response with proper styling
                const formattedAnswer = formatResponse(answer);
                addMessage(formattedAnswer);

            } catch (error) {
                removeLoadingIndicator();
                addMessage('I apologize, but I encountered a technical difficulty. Please try again. If this continues, you may need to check the API configuration.');
                console.error('Error:', error);
            }

            sendBtn.disabled = false;
            userInput.focus();
        }

        function formatResponse(text) {
            // Convert markdown-style formatting to HTML
            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            // Format line breaks
            text = text.replace(/\n\n/g, '</p><p>');
            text = text.replace(/\n/g, '<br>');
            
            return '<p>' + text + '</p>';
        }

        // Focus input on load
        window.onload = () => userInput.focus();
    </script>
</body>
</html>
